/*! For license information please see search.js.LICENSE.txt */
!function(){var t={488:function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(e){var r=function(e){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}var n;n=jQuery,new(function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()},r=[{key:"init",value:function(){this.load_multiselect(),this.control_multiselect()}},{key:"load_multiselect",value:function(){n(".simplecharm-select-options li").each((function(){var t=this;n(this).on("click",(function(e){e.preventDefault();var r=n(t).find("input")[0];r.checked=!r.checked,r.checked?n(r).addClass("selected"):n(r).removeClass("selected"),n("#".concat(t.className)).prop("selected",r.checked),n("#".concat(t.className)).selected=r.checked;var o=n(".simplecharm-select-form p b"),a=n(".selected");a.length?o.text("".concat(a.length," Category Selected")):o.text("Select Categories")}))}))}},{key:"control_multiselect",value:function(){var t=n(".simplecharm-select-form p"),e=n(".simplecharm-select-options"),r=n(".simplecharm-selectform-dropdown-icon");t.on("click",(function(t){e.toggleClass("multiselect-closed"),r.toggleClass("multiselect-open"),e.toggleClass("multiselect-hide")}))}}],r&&e(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r}())},684:function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";e=function(){return n};var r,n={},o=Object.prototype,a=o.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(r){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof b?e:b,a=Object.create(o.prototype),c=new N(n||[]);return i(a,"_invoke",{value:P(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var d="suspendedStart",m="suspendedYield",v="executing",y="completed",g={};function b(){}function w(){}function x(){}var k={};f(k,s,(function(){return this}));var _=Object.getPrototypeOf,L=_&&_(_(A([])));L&&L!==o&&a.call(L,s)&&(k=L);var E=x.prototype=b.prototype=Object.create(k);function S(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function j(e,r){function n(o,i,c,s){var u=p(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==t(f)&&a.call(f,"__await")?r.resolve(f.__await).then((function(t){n("next",t,c,s)}),(function(t){n("throw",t,c,s)})):r.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return n("throw",t,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,e){function a(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(a,a):a()}})}function P(t,e,n){var o=d;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:r,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=O(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var u=p(t,e,n);if("normal"===u.type){if(o=n.done?y:m,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function O(t,e){var n=e.method,o=t.iterator[n];if(o===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,g;var i=a.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,g):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function A(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(a.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=r,t.done=!0,t};return i.next=i}}throw new TypeError(t(e)+" is not iterable")}return w.prototype=x,i(E,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:w,configurable:!0}),w.displayName=f(x,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},n.awrap=function(t){return{__await:t}},S(j.prototype),f(j.prototype,u,(function(){return this})),n.AsyncIterator=j,n.async=function(t,e,r,o,a){void 0===a&&(a=Promise);var i=new j(h(t,e,r,o),a);return n.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(E),f(E,l,"Generator"),f(E,s,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=A,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:A(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),g}},n}function r(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){s=!0,i=t},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw i}}}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e,r,n,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function c(t){o(i,n,a,c,s,"next",t)}function s(t){o(i,n,a,c,s,"throw",t)}c(void 0)}))}}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function c(e){var r=function(e){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}var s,u;s=jQuery,u=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init(),this.page=1,this.allUsers=[],this.totalPage=1},n=[{key:"init",value:function(){this.load_posts()}},{key:"load_categories",value:function(){for(var t=document.getElementById("categories").selectedOptions,e=[],r=0;r<t.length;r++){var n=t[r].getAttribute("name");e.push(n)}return e}},{key:"load_posts",value:function(){var t=this;s("#simplecharm-advanced-search-form").on("submit",(function(e){e.preventDefault();var r=s(".simplecharm-select-options"),n=s(".simplecharm-selectform-dropdown-icon"),o=s(".search-field").val(),a=t.load_categories();r.hasClass("multiselect-closed")||(r.addClass("multiselect-closed"),n.removeClass("multiselect-open"),r.addClass("multiselect-hide")),t.requestPosts(e,o,a,t.page)}))}},{key:"requestPosts",value:(u=a(e().mark((function t(n,o,a,i){var c,u,l,f,h,p,d,m,v,y,g,b,w,x,k,_,L,E=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s(".simplecharm-searchpage-pagination").html(""),u=document.querySelector('link[rel="https://api.w.org/').href,c=u+"wp/v2/posts",l=new URLSearchParams,o&&l.append("search",o),a.length>0&&l.append("categories",a.join(",")),i&&l.append("page",i),s("#simplecharm-loading-overlay").show(),t.prev=9,(f=s("#simplecharm-search-page")).html(""),!u.endsWith("rest_route=/")){t.next=18;break}return t.next=15,fetch(c+"&"+l.toString());case 15:h=t.sent,t.next=21;break;case 18:return t.next=20,fetch(c+"?"+l.toString());case 20:h=t.sent;case 21:return t.next=23,h.headers.get("X-Wp-Totalpages");case 23:return this.totalPage=t.sent,t.next=26,h.json();case 26:if("rest_post_invalid_page_number"!==(p=t.sent).code){t.next=31;break}this.requestPosts(n,o,a,1),t.next=77;break;case 31:if(!(p.length>0)){t.next=75;break}d=r(p),t.prev=33,d.s();case 35:if((m=d.n()).done){t.next=51;break}return v=m.value,y=new Date(v.date),g={year:"numeric",month:"long",day:"numeric"},v.date=y.toLocaleDateString("en-US",g),b=v.date,v.title.rendered.length<=0&&(b='<a href="'.concat(v.link,'">').concat(v.date,"</a>")),t.next=44,this.get_user(v.author);case 44:w=t.sent,(x=document.createElement("div")).classList.add("post-".concat(v.id),"simplecharm-text-center","simplecharm-content"),x.innerHTML='\n                <h1 class="post-title">\n                    <a href="'.concat(v.link,'">').concat(v.title.rendered,'</a>\n                </h1>\n                <div class="post-meta">\n                    <span class="post-date">\n                        ').concat(b,'\n                    </span>\n                    <span class="post-author">\n                        <a href="').concat(w.link,'">').concat(w.username,'</a>\n                    </span>\n                </div>\n                <div class="post-content">\n                    ').concat(v.excerpt.rendered,"\n                </div> "),f.append(x);case 49:t.next=35;break;case 51:t.next=56;break;case 53:t.prev=53,t.t0=t.catch(33),d.e(t.t0);case 56:return t.prev=56,d.f(),t.finish(56);case 59:if(!(this.totalPage>1)){t.next=71;break}(k=s(".simplecharm-searchpage-pagination")).html(""),_=e().mark((function t(){var r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=document.createElement("a")).classList.add(L),r.classList.add(i==L?"active":"inactive"),r.innerText=L,k.append(r),r.addEventListener("click",(function(t){E.page=r.classList[0]?r.classList[0]:1,E.requestPosts(t,o,a,E.page)}));case 6:case"end":return t.stop()}}),t)})),L=1;case 64:if(!(L<=this.totalPage)){t.next=69;break}return t.delegateYield(_(),"t1",66);case 66:L++,t.next=64;break;case 69:t.next=73;break;case 71:s(".simplecharm-searchpage-pagination").html("");case 73:t.next=76;break;case 75:f[0].innerHTML='<p class="simplecharm-text-center">No search results found for "'.concat(o,'"</p>');case 76:s("#simplecharm-loading-overlay").hide();case 77:t.next=84;break;case 79:t.prev=79,t.t2=t.catch(9),console.error("Error fetching posts:",t.t2),document.getElementById("simplecharm-search-page").innerHTML="<p>Error fetching posts.</p>",s("#simplecharm-loading-overlay").hide();case 84:case 85:case"end":return t.stop()}}),t,this,[[9,79],[33,53,56,59]])}))),function(t,e,r,n){return u.apply(this,arguments)})},{key:"get_user",value:(c=a(e().mark((function t(r){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r in this.allUsers){t.next=8;break}return t.next=3,this.load_user(r);case 3:return n=t.sent,this.allUsers[r]=n,t.abrupt("return",n);case 8:return t.abrupt("return",this.allUsers[r]);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"load_user",value:(o=a(e().mark((function t(r){var n,o,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("action","simplecharm_get_user_info"),n.append("user_id",r),t.prev=3,t.next=6,fetch(admin_data.ajax_url,{method:"POST",body:n});case 6:return o=t.sent,t.next=9,o.json();case 9:if((a=t.sent).error){t.next=12;break}return t.abrupt("return",a);case 12:t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(3),t.t0;case 17:return t.abrupt("return",userdata);case 18:case"end":return t.stop()}}),t,null,[[3,14]])}))),function(t){return o.apply(this,arguments)})}],n&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o,c,u}(),new u}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";r(488),r(684)}()}();
//# sourceMappingURL=search.js.map